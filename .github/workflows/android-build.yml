name: Detect V1 Usage

on:
  push:
  pull_request:
  workflow_dispatch:

jobs:
  scan-v1:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Search for v1 usage
        run: |
          echo "üîç Scanning repository for 'v1'..."
          # Grep recursive search for 'v1' (case sensitive)
          if grep -rnw . -e "v1"; then
            echo "::warning:: 'v1' detected above (file:line). Please verify and upgrade if needed."
            exit 1
          else
            echo "‚úÖ No 'v1' usage found in repo."
          fi
