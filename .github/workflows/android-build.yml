name: Check for v1 usage

on:
  push:
  pull_request:
  workflow_dispatch:

jobs:
  scan-v1:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Scan repo for v1 usage
        run: |
          echo "üîç Scanning for v1 references..."
          matches=$(grep -rnw . -e 'v1' || true)

          if [ -z "$matches" ]; then
            echo "‚úÖ No v1 usage found!"
          else
            echo "‚ùå Found v1 usage in repository:"
            echo "$matches"
            echo "::error:: v1 references detected. Please update to newer version."
            exit 1
          fi
